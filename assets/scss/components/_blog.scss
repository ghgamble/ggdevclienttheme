/* ===========================
   Archive Masonry (CSS Columns)
   =========================== */

.archive-masonry {
	/* Adjustable knobs */
	--cols: 3;          /* desktop column count */
	--col-gap: 2.25rem; /* horizontal space between columns */
	--row-gap: 0.85rem; /* vertical space between cards */

	/* True masonry via multi-columns */
	column-count: var(--cols);
	column-gap: var(--col-gap);

	/* Ensure no legacy flex/grid leaks in */
	display: block;
    margin-bottom: 3rem;

    article.post {
        margin-bottom: 0;
    }
}

/* Optional: keep .max-3 for semantic clarity (cap at 3 columns on wide) */
.archive-masonry.max-3 { --cols: 3; }

/* Breakpoints */
@media (max-width: 1100px) {
	.archive-masonry.max-3 { 
        --cols: 2; 
    }
}
@media (max-width: 640px) {
	.archive-masonry.max-3 { 
        --cols: 1; 
        article.post {
            margin-left: 0;
            margin-right: 0;
            margin-top: 2rem;
        }
    }
}

/* Each card is a column item; row gap comes from bottom margin */
.masonry-card {
	display: inline-block;               /* required for column layout */
	width: 100%;
	margin: 0 0 var(--row-gap);         /* vertical spacing between cards */
	break-inside: avoid;                 /* don't split cards across columns */
	-webkit-column-break-inside: avoid;
	-moz-column-break-inside: avoid;
	box-sizing: border-box;              /* padding/border won't alter width */
	overflow: hidden;

	/* Media */
	.card-thumb {
		display: block;                  /* anchor fills full width */
		margin: 0;                       /* kill stray margins */
		img {
			display: block;
			width: 100%;
			height: auto;                /* preserve natural aspect ratio */
		}
	}

	/* Content */
	.card-body {
		padding: .75rem 1rem .75rem 0;            /* slightly tighter internal padding */
	}

	.card-date {
		display: block;
		font-size: .875rem;
		opacity: .7;
		margin: 0 0 .2rem;
	}

	.entry-title {
		font-size: 1.25rem;
		line-height: 1.3;
		margin: 0 0 .35rem;
		a { text-decoration: none; }
	}

	.excerpt { margin: 0; }

	/* Prevent double spacing from default WP margins */
	> *:last-child,
	.card-body > *:last-child { margin-bottom: 0; }
}

/* Keep pagination visually separated from the grid */
.pagination {
	margin-top: clamp(1rem, 2vw, 2rem);
}
